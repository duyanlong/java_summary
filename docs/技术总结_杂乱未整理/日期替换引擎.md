[TOC]
## 日期替换引擎帮助文档

### 方法列表
|方法|功能介绍|输入数据|输入时间|输出效果|    
|---|---|---|---|---| 
|date|根据时间格式将原内容中格式替换为指定单位的时间|select * from table1 where pday=${date(Ymd)}|20210603|select * from table1 where pday=20210603|   
|date_add|根据时间格式将原内容中格式替换为指定单位计算后的时间|select * from table1 where pday=${date(Ymd)} or pday=${date_add(Ymd,-30)}|20210603|select * from table1 where pday=20210603 or pday=20210504|   
|date_range|根据时间格式将原内容中格式替换指定单位时间范围|select * from table1 where pday in ( ${date_range(Ymd,-3)} )|20210603|select * from table1 where pday in ( '20210601','20210602','20210603' )|

### 时间单位列表
|时间单位|介绍|输入数据|输入时间|输出效果|    
|---|---|---|---|---| 
|Y|年|${date(Y)}|202106031119|2021| 
|m|月|${date(m)}|202106031119|06| 
|d|日|${date(d)}|202106031119|03| 
|H|时 （24小时制）|${date(Y)}|202106031119|11| 
|M|分钟|${date(Y)}|202106031119|19| 

### 代码样例
**输入内容：**
```sql
select
	*
from
	table1
where
	pday = ${date(Ymd)}
	and hour in ( ${date_range(YmdH, 10)} )
	and minute = ${date_add(YmdHM,-5)}
```
**输入时间：** 202105110920      
**执行代码：** 
```java
        String oldStr = "select * from table1 where pday = ${date(Ymd)} and hour in ( ${date_range(YmdH,10)} ) and minute = ${date_add(YmdHM,-5)}";
        String thedate = "202105110920";

        Map<String, TimeOperator> patterns = DateParser.getTimePattern(oldStr);
        // new char
        patterns = DateParser.buildeDateChars(thedate, patterns);
        // replace
        for (Map.Entry<String, TimeOperator> timeEntry : patterns.entrySet()) {
            String key = timeEntry.getKey();
            //oldStr = oldStr.replace(String.format("\'%s\'", key), key);
            //oldStr = oldStr.replace(String.format("\\\'%s\\\'", key), key);
            oldStr = oldStr.replace(key, timeEntry.getValue().getNewChar());
        }

```

**输出结果：**
```sql
select
	*
from
	table1
where
	pday = 20210511
	and hour in ( '2021051109', '2021051110', '2021051111', '2021051112', '2021051113', '2021051114', '2021051115', '2021051116', '2021051117', '2021051118' )
	and minute = 202105110915
```


